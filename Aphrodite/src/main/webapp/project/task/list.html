<div data-ng-controller="TaskListController">
	<div class="row wrapper border-bottom white-bg page-heading">
		<div class="col-lg-12">
			<h2><i class="fa fa-server"></i> 项目</h2>
			<ol class="breadcrumb">
				<li>
					<a data-ui-sref="monitor">首页</a>
				</li>
				<li>
					<a>项目与任务</a>
				</li>
				<li class="active">
					<strong>任务</strong>
				</li>
			</ol>
		</div>
	</div>
	<div class="wrapper wrapper-content animated fadeInRight">
		<div class="row">
			<div class="col-lg-12">
				<div class="ibox float-e-margins">
					<div class="ibox-title">
						<h5><i class="glyphicon glyphicon-list"></i></h5>
						<div class="ibox-tools">
							<a class="collapse-link">
								<i class="fa fa-chevron-up"></i>
							</a>
							<a class="close-link">
								<i class="fa fa-times"></i>
							</a>
						</div>
					</div>
					<div class="ibox-content">
						<div class="row">
							<div class="col-lg-6" style="float: right;">
								<div class="input-group">
									<input type="text" class="input-sm form-control" data-ng-keyup="search()" data-ng-model="param" placeholder="Search in table" />
									<span class="input-group-btn">
										<button type="button" class="btn btn-sm btn-primary" data-ng-click="search()"> Go!</button>
									</span>
									<span class="input-group-btn" style="padding-left: 5px;">
										<button class="btn btn-sm btn-primary" type="button" data-toggle="modal" data-target="#addTaskModal" data-ng-click="loadProject()">添加任务</button>
									</span>
									<span class="input-group-btn" style="padding-left: 5px;">
										<button class="btn btn-sm btn-primary" type="button" data-ng-click="delTask()">删除任务</button>
									</span>
									<span class="input-group-btn" style="padding-left: 5px;">
										<button class="btn btn-sm btn-primary" type="button" data-ng-click="loadTaskInfo()">修改任务</button>
									</span>
								</div>
							</div>
						</div>
						<div class="table-responsive">
							<table class="table table-striped">
								<thead>
									<tr>
										<th>#</th>
										<th>序号</th>
										<th>所属项目</th>
										<th>任务名</th>
										<th></th>
										<th></th>
									</tr>
								</thead>
								<tbody>
									<tr data-ng-repeat="item in items">
										<td>
											<input data-icheck data-ng-model="iCheck" type="checkbox" name="selectId" value="{{item.id}}" />
										</td>
										<td>{{(currentPage - 1) * pageSize + $index + 1}}</td>
										<td>{{item.projectName}}</td>
										<td>{{item.name}}</td>
										<td></td>
										<td></td>
									</tr>
									
								</tbody>
								<tfoot>
									<tr>
										<td colspan="6" align="right">
											<uib-pagination total-items="totalItems" ng-model="currentPage" max-size="5" items-per-page="pageSize" previous-text="上一页" next-text="下一页" boundary-link-numbers="true" force-ellipses="true" ng-change="search()"></uib-pagination>
										</td>
									</tr>
								</tfoot>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
<!-- 	新增任务模块 -->
	<div class="modal fade" id="addTaskModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content animated bounceInRight">
				<form class="form-horizontal" role="form" data-ng-submit="addTask()">
					<div class="modal-header">
			            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
						<h4 class="modal-title" id="myModalLabel">
							添加任务
						</h4>
					</div>
					<div class="modal-body">
						<div class="form-group">
							<label for="name" class="col-sm-2 control-label">任务名称</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" data-ng-model="task.name" placeholder="任务名称" required/>
							</div>
						</div>
						<div class="form-group">
							<label for="sn" class="col-sm-2 control-label">选择项目</label>
							<div class="col-sm-10">
							<select id="project" class="form-control" data-ng-change="loadHost()" 
								data-ng-model="task.project" data-ng-options="x.value as x.label for x in projects"></select>
							</div>
						</div>
						<div class="form-group">
							<label for="sn" class="col-sm-2 control-label">选择主机</label>
							<div class="col-sm-10">
								<select id="hosts" class="multiselect" multiple="multiple" data-ng-model="task.hosts"></select>
							</div>
						</div>
						<div class="form-group">
							<label for="description" class="col-sm-2 control-label">任务描述</label>
							<div class="col-sm-10">
								<textarea class="form-control" rows="3" data-ng-model="task.description"></textarea>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-sm btn-default" data-dismiss="modal">关闭</button>
						<button type="submit" class="btn btn-sm btn-primary">添加任务</button>
					</div>
				</form>
			</div>
		</div>
	</div>
<!-- 	修改任务模块 -->
	<div class="modal fade" id="modifyTaskModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content animated bounceInRight">
				<form class="form-horizontal" role="form" data-ng-submit="modifyTaskInfo()">
					<div class="modal-header">
			            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
						<h4 class="modal-title" id="myModalLabel">
							修改任务
						</h4>
					</div>
					<div class="modal-body">
						<div class="form-group">
							<label for="name" class="col-sm-2 control-label">任务名称</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" data-ng-model="modifyTask.name" placeholder="任务名称" required/>
							</div>
						</div>
						<div class="form-group">
							<label for="sn" class="col-sm-2 control-label">选择项目</label>
							<div class="col-sm-10">
							<select id="projects" class="form-control"  
								data-ng-model="modifyTask.project" data-ng-options="x.value as x.label for x in projectss"></select>
							</div>
						</div>
						<div class="form-group">
							<label for="sn" class="col-sm-2 control-label">选择主机</label>
							<div class="col-sm-10">
								<select id="hostss" class="multiselect" multiple="multiple" data-ng-model="modifyTask.hosts"></select>
							</div>
						</div>
						<div class="form-group">
							<label for="description" class="col-sm-2 control-label">任务描述</label>
							<div class="col-sm-10">
								<textarea class="form-control" rows="3" data-ng-model="modifyTask.description"></textarea>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-sm btn-default" data-dismiss="modal">关闭</button>
						<button type="submit" class="btn btn-sm btn-primary">确认修改</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>
