<div class="tab-pane animated fadeIn active" data-ng-controller="MachineInfoController">
	<div class="panel-body" style="overflow:auto;">
		<table class="table table-striped">
			<tbody>
				<tr>
					<th rowspan='2' style="vertical-align:middle;">服务器地址</th>
					<th colspan='5'>CPU使用情况</th>
					<th colspan='3'>磁盘使用情况</th>
					<th colspan='2'>网络使用情况</th>
					<th colspan='2'>内存使用情况</th>
				</tr>
				<tr>
					<td>User%</td>
					<td>Sys%</td>
					<td>Wait%</td>
					<td>Idle%</td>
					<td>CPU%</td>
					<td>Disk Read KB/s</td>
					<td>Disk Write KB/s</td>
					<td>IO/sec</td>
					<td>en0-reads KB/s</td>
					<td>en0-writes KB/s</td>
					<td>swaptotal MB</td>
					<td>Memfree MB</td>
				</tr>
				<tr data-ng-repeat="item in items">
					<td>{{item.hostIP.value}}</td>
					<td><a href="#" data-ng-click="getGraph()">{{item.CPU.CPU_user_time}}</a></td>
					<td>{{item.CPU.CPU_system_time}}</td>
					<td>{{item.CPU.CPU_iowait_time}}</td>
					<td>{{item.CPU.CPU_idle_time}}</td>
					<td>item.DISK.Free_disk_space_on_\</td>
					<td>item.DISK.Free_disk_space_on_\</td>
					<td>{{IO}}</td>
					<td>3</td>
					<td>3</td>
					<td>3</td>
					<td>{{item.MEMORY.Total_swap_space}}</td>
					<td>{{item.MEMORY.Available_memory}}</td>
				</tr>
			</tbody>
		</table>
	</div>
	
<!-- 	图表显示 -->
	<div class="tab-pane animated fadeIn active">
		<div class="panel-body">
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title"><span class="glyphicon glyphicon-stats"></span> 趋势图</h3>
				</div>
				<div class="input-prepend input-group">
					<span class="add-on input-group-addon"><i class="glyphicon glyphicon-calendar fa fa-calendar"></i></span>
					<input type="text" style="width: 300px;" id="dateRange" class="form-control" readonly="readonly"/>
				</div>
				<div class="panel-body" data-ng-controller="MachineNetworkController">
					<div id="workChart" style="height:400px;"></div>
				</div>
			</div>
		</div>
	</div>
	
	
</div>

<script type="text/javascript" src="js/main/taskGraph.js"></script>
<script type="text/javascript">
function MachineInfoController($scope, $http, $stateParams) {
	console.log($stateParams.taskId+"  "+$stateParams.startTime+"  "+$stateParams.endTime);
	$http({
			method: 'GET',
			url: 'r/taskData/detailMonitor', 
			params:{'taskId': $stateParams.taskId,
					'startTime':$stateParams.startTime,
					'endTime':$stateParams.endTime}}
		).success(function(data) {
			console.log("This data is ");
			console.log(data);
			$scope.items = data;
    });
	
	
	$scope.getGraph = function(){
		//显示图表数据
		var params = {
				taskId: $stateParams.taskId,
				graphDiv: 'workChart',
				title: 'Network',
				key: ['net.if.in', 'net.if.out'],
				graphType: 'line',
				formatter: 'kbps',
				scaler: 1024,
				dateRangeId: 'dateRange'
		};
		
		DataGraph(params);
	}
	
}

</script>